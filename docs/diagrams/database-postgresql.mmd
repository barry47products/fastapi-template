graph LR
    App[FastAPI App]:::application --> Pool[Connection Pool]:::pool
    Pool --> Primary[(Primary Database)]:::primary
    Pool --> Read1[(Read Replica 1)]:::replica
    Pool --> Read2[(Read Replica 2)]:::replica

    App --> Redis[(Redis Cache)]:::cache

    subgraph "PostgreSQL Cluster"
        Primary
        Primary -.-> Read1
        Primary -.-> Read2
    end

    classDef application fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef pool fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef primary fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef replica fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef cache fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000

graph TB
    subgraph "Container Image"
        Base[Python 3.13 Slim]:::buildStage
        Base --> Poetry[Poetry Dependencies]:::buildStage
        Poetry --> App[Application Code]:::buildStage
        App --> Config[Environment Config]:::buildStage
    end

    subgraph "Runtime"
        Config --> Uvicorn[Uvicorn Server]:::runtime
        Uvicorn --> Workers[Multiple Workers]:::runtime
        Workers --> HealthCheck[Health Checks]:::runtime
    end

    subgraph "External"
        Workers --> Database[(Database)]:::external
        Workers --> Services[External Services]:::external
        HealthCheck --> Monitoring[Monitoring Systems]:::external
    end

    classDef buildStage fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef runtime fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef external fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000

graph TB
    Client[Client Applications]:::client --> API[FastAPI Application]:::interface
    API --> App[Application Layer]:::application
    App --> Domain[Domain Layer]:::domain
    App --> Infra[Infrastructure Layer]:::infrastructure
    Infra --> DB[(Primary Database)]:::database
    Infra --> Cache[(Redis Cache)]:::cache
    Infra --> External[External APIs]:::external
    Infra --> Metrics[Metrics Collection]:::observability
    Infra --> Logs[Structured Logging]:::observability

    subgraph "Clean Architecture"
        Domain
        App
        Infra
    end

    subgraph "Data Layer"
        DB
        Cache
    end

    subgraph "Observability"
        Metrics
        Logs
    end

    classDef client fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000
    classDef interface fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef application fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef domain fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef infrastructure fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef database fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef cache fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    classDef external fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef observability fill:#f1f8e9,stroke:#689f38,stroke-width:2px,color:#000
